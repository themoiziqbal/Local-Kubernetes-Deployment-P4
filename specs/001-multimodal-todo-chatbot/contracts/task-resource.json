{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Task Resource Schema",
  "description": "MCP resource schema for Task entity exposed via SQLite MCP server",
  "type": "object",
  "resource_uri_template": "task://{action}/{id?}",
  "actions": {
    "list": {
      "uri": "task://list",
      "method": "GET",
      "description": "List all tasks with optional filtering",
      "query_parameters": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["pending", "in-progress", "completed"],
            "description": "Filter by task status"
          },
          "priority": {
            "type": "string",
            "enum": ["low", "medium", "high"],
            "description": "Filter by priority level"
          },
          "due_before": {
            "type": "string",
            "format": "date-time",
            "description": "Filter tasks due before this datetime (ISO 8601)"
          },
          "tags": {
            "type": "array",
            "items": {"type": "string"},
            "description": "Filter by tags (tasks must have all specified tags)"
          }
        }
      },
      "response": {
        "type": "array",
        "items": {"$ref": "#/definitions/Task"}
      }
    },
    "get": {
      "uri": "task://get/{id}",
      "method": "GET",
      "description": "Retrieve a single task by ID",
      "path_parameters": {
        "type": "object",
        "properties": {
          "id": {"type": "integer", "description": "Task ID"}
        },
        "required": ["id"]
      },
      "response": {"$ref": "#/definitions/Task"},
      "errors": {
        "404": "Task not found"
      }
    },
    "schema": {
      "uri": "task://schema",
      "method": "GET",
      "description": "Get Task table schema",
      "response": {
        "type": "object",
        "properties": {
          "table_name": {"type": "string"},
          "columns": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {"type": "string"},
                "type": {"type": "string"},
                "nullable": {"type": "boolean"},
                "default": {"type": ["string", "null"]}
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "Task": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "description": "Unique task identifier (auto-generated)"
        },
        "description": {
          "type": "string",
          "minLength": 1,
          "maxLength": 500,
          "description": "Task description (required)"
        },
        "due_date": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "Deadline in ISO 8601 format (YYYY-MM-DD HH:MM:SS)"
        },
        "priority": {
          "type": ["string", "null"],
          "enum": ["low", "medium", "high", null],
          "description": "Priority level (optional)"
        },
        "status": {
          "type": "string",
          "enum": ["pending", "in-progress", "completed"],
          "default": "pending",
          "description": "Current task status"
        },
        "tags": {
          "type": "array",
          "items": {"type": "string"},
          "default": [],
          "description": "List of string tags for categorization"
        },
        "created_at": {
          "type": "string",
          "format": "date-time",
          "description": "Creation timestamp (auto-generated)"
        },
        "updated_at": {
          "type": "string",
          "format": "date-time",
          "description": "Last modification timestamp (auto-updated)"
        }
      },
      "required": ["id", "description", "status", "created_at", "updated_at"],
      "additionalProperties": false
    }
  }
}
